---
title: "Introduction to R Markdown"
output: 
  learnr::tutorial:
    css: "css/logo.css"
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
knitr::opts_chunk$set(echo = FALSE,   
                      message = FALSE,
                      warning = FALSE,
                      collapse = TRUE,
                      fig.height = 4,
                      fig.width = 6,
                      fig.align = "center",
                      cache = FALSE)
tutorial_html_dependency()
```


# Introduction to R Markdown

## What is R Markdown?

When you writing report and doing analysis with some software, you might need to download your result, then write text and insert the result into your word processor (eg, Microsoft Word).

But R Markdown allow you embed R code in a Markdown document, produce **textual output** along with **graphics** in a **single file**. 


### A quick tour of R Markdown

![](https://vimeo.com/178485416)


### Installation

```
install.packages("rmarkdown")
```


### Create a R Markdown Document

![](images/Rmarkdown_1.png){width="40%" height="40%"}


**You can always switch the output when you generate the output**


![](images/Rmd_output_format.png){width="40%" height="40%"}

#### Or you can create a R Markdown document by:

`File > New File > R Markdown > Document`


### Notice that the file contains three types of content

![](images/Rmarkdown_sample.png){width="80%" height="80%"}

* A YAML header surrounded by `---`

* R code chunks surrounded by `` ``` ``

* text mixed with simple text formatting


## YAML Headers

The top of the R Markdown file sets up the title, author, date and output format to create. It is called YAML, an acronym for "Yet Another Markup Language"! 

YAML has `---` at the top and bottom. For example, 

```
---
title: "Introduction to R Markdown"
author: "Professor Di Cook""
output: html_document
---
```

### Produce output

It require `knitr` package.

```
install.packages("knitr")
```

You can generate three types of output by:

* HTML: `Knit > Knit HTML`

* PDF: `Knit > Knit PDF`

* Word: `Knit > Knit Word`


### Slide for Presentation

You can also create a new document that will produce a slide show:

`File > New File > R Markdown > Presentation`


### Flexdashboard document

You may need to install the package 'flexdashboard':

```
install.packages("flexdashboard")
```

#### Create a flexdashboard document:

`File > New File > R Markdown > From template`


### Web app

Create a new web app:

`File > New File > R Markdown > Shiny Web app`




## Markdown syntax

When you knit your file, [Pandoc](https://pandoc.org/MANUAL.html#pandocs-markdown) transforms the marked up text into formatted text in your final file format.

![](images/Rmarkdown_basics.png){width="80%" height="80%"}


### Headings

`#` is a top level heading, or section

`##` is a second level heading, or subsection

`###` is a third level heading, or subsubsection


### Lists

`-` or `*` or `+` on the beginning of several lines makes a bullet list.

You can create a Sub-lists by:

```
* Item A
     + Item a
     * Item aa
- Item B
```

Produces:

* Item A
     + Item a
     * Item aa
- Item B


If you use `1.`, `2.`, … is creates a numbered lists

```
1. Item A
2. Item B
```

Produces:

1. Item A
2. Item B


### Text type

Bold text surrounded by `*` or `-`.

Italicized text surrounded by `**` or `--`.

Strikethrough text surrounded by `~~`

For example,

```
Item A

**Item A**

*Item A*

~~Item A~~
```

Produces:

Item A

*Item A*

**Item A**

~~Item A~~


### Create table

You can create a table in R Markdown. For example:

```
Table Header  Second Header
------------  -------------
Table Cell    Cell 2
Cell 3        Cell 4
```

Produces:

Table Header  Second Header
------------  -------------
Table Cell    Cell 2
Cell 3        Cell 4


### Math

It will appear verbatim between `$` characters.

For example:

```
$A = \pi * r^{2}$
```

Produces:

$A = \pi * r^{2}$


More detail about writing math in R Markdown: [Latex Cheatsheet](https://wch.github.io/latexsheet/)


### Insert link

Simply enter the URL, or if you want different text use “[]” around the text followed by () around the link, eg

`[RStudio cheatsheets](https://www.rstudio.com/resources/cheatsheets/)`

produces:

[RStudio cheatsheets](https://www.rstudio.com/resources/cheatsheets/)


### Insert Images

You can insert an image in two way:

* a URL (if the image is hosted online)

* a file path (if the image is saved as a file)

#### By URL:

```
![](http://compeap.com/wp-content/uploads/you-dont-know-everything.jpg)
```

**or**

#### By file path:

```
![](images/Insert_image.jpg)
```


Produces:

![](images/Insert_image.jpg)






## Code chunks

Chunks of R code surrounded by `` ``` ``, and the `{r}` specifies that this is R code. You can quickly insert chunks like these into your file with

* the keyboard shortcut: `Ctrl + Alt + I` for general or `command + option + I` for OS X.

* or click "Insert" button in toolbar, then select "R".

![](images/Insert_Rchunk.png){width="30%" height="30%"}


For example, you can include code and plot into your report.

```{r echo=TRUE}
library(ggplot2)
ggplot(data = cars, mapping = aes(x = speed, y = dist)) + 
  geom_point()
```


### Name the chunk

Straight after the `` ```{r `` you can use a text string to name the chunk. This has three advantages:

1. You can more easily navigate to specific chunks using the drop-down code navigator in the bottom-left of the script editor.

![](images/Script_editor.png){width="30%" height="30%"}

2. Graphics produced by the chunks will have useful names that make them easier to use elsewhere.

3. You can set up networks of cached chunks to avoid re-performing expensive computations on every run. More on that below.


### Chunk option

After you name the chunk, you can also set the behavior of the chunk.


#### Code evaluation

#### `eval = FALSE`

Default value is `TRUE`, if `FALSE`, knitr will not run the code in the code chunk.


#### Results

#### `echo = FALSE`

Default value is `TRUE`, if `FALSE`, knitr will not display the code in the code chunk above it’s results in the final document.

#### `results = hide`

If `hide`, knitr will not display the code’s results in the final document.

#### `message = FALSE`

Default value is `TRUE`, if `FALSE`, knitr will not display any messages generated by the code.

#### `warning = FALSE`

Default value is `TRUE`, if `FALSE`, knitr will not display any warning messages generated by the code.

#### `error = FALSE`

Default value is `TRUE`, if `FALSE`, knitr will not display any error messages generated by the code.

**`error = FALSE` which could be dangerous**


#### Plots

#### `fig.show = 'hide'`

Knitr will generate the plots created in the chunk, but not include them in the final document. 

#### `fig.height = 5` and `fig.width = 5`

The width and height to use in R for plots created by the chunk is 5 (in inches).

#### `fig.align = 'center'` 

Align graphics in the center of final document. other option is `'left'` or `'right'`.


### Global option

You can set all chunk behaviour once at the top of the `.Rmd file` using a chunk like:

```
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  fig.width = 4,
  fig.height = 4
)
```

* `echo = FALSE`: hide all the code but keep the result in output file.

* `message = FALSE` and `warning = FALSE` prevents all messages or warnings from appearing in the finished file.

* `fig.width = 4` and `fig.height = 4` set the width and heigth of all figure in output file as 4.






## Resources

### Cheat sheet

* [R Markdown](https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf)

* [R Markdown Reference Guide](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)

* [Latex Cheatsheet](https://wch.github.io/latexsheet/)


### Online course

[R Markdown form R Studio](https://rmarkdown.rstudio.com/lesson-1.html)


### Video

* [Getting started with R Markdown](https://resources.rstudio.com/the-essentials-of-data-science/getting-started-with-r-markdown-60-02)

* [Reproduible Reporting](https://resources.rstudio.com/the-essentials-of-data-science/reproducible-reporting-58-03)

* [Interctive Reporting](https://resources.rstudio.com/the-essentials-of-data-science/interactive-reporting-60-01)














